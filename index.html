<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="format-detection" content="telephone=no">
    <title>Equivalency Calculator</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Additional styles for iframe embedding -->
    <style>
        html, body {
            overflow-x: hidden;
            max-width: 100%;
            box-sizing: border-box;
        }
        * {
            box-sizing: border-box;
        }

        
        @media (max-width: 768px) {
            body {
                font-size: 0.95rem;
            }
        }
        @media (max-width: 480px) {
            body {
                font-size: 0.9rem;
            }
        }
    </style>

</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-calculator"></i> Equivalency Calculator <span class="jor-badge">JOR</span></h1>
            <p class="subtitle">Select an equation and enter your scores to calculate your equivalency</p>
        </header>
        
        <main>
            <div id="equation-selection-section">
                <div id="equation-selection">
                    <h2>Select an Equation</h2>
                    <div id="equation-cards" class="card-container"></div>
                </div>
                
                <div id="input-section" class="hidden">
                    <h2>Enter Your Scores</h2>
                    <button id="back-button" class="btn">Back to Equations</button>
                    <div id="dynamic-inputs"></div>
                    <button id="calculate-button" class="btn primary-btn">Calculate Results</button>
                </div>
                
                <!-- Equivalency Conversion Tables -->
                <div id="main-conversion-tables" class="conversion-section">
                    <h2>Equivalency Conversion Tables</h2>
                    <p class="table-info">These tables show how raw scores convert to Jordanian percentages</p>
                    
                    <div class="tables-container">
                        <div class="top-tables">
                            <!-- EST/SAT SUBJECT Equivalency Table -->
                            <div class="table-wrapper sat-table">
                                <h3>EST/SAT SUBJECT Equivalency Table</h3>
                                <table>
                                    <thead>
                                        <tr>
                                            <th>EST/SAT Score Range</th>
                                            <th>Equivalency</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr><td>780–800</td><td>100%</td></tr>
                                        <tr><td>750–770</td><td>98%</td></tr>
                                        <tr><td>720–740</td><td>95%</td></tr>
                                        <tr><td>690–710</td><td>93%</td></tr>
                                        <tr><td>660–680</td><td>90%</td></tr>
                                        <tr><td>630–650</td><td>86%</td></tr>
                                        <tr><td>600–620</td><td>83%</td></tr>
                                        <tr><td>570–590</td><td>80%</td></tr>
                                        <tr><td>540–560</td><td>77%</td></tr>
                                        <tr><td>510–530</td><td>73%</td></tr>
                                        <tr><td>480–500</td><td>70%</td></tr>
                                        <tr><td>450–470</td><td>65%</td></tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- AP Subjects Equivalency -->
                            <div class="table-wrapper ap-table">
                                <h3>AP Subjects Equivalency</h3>
                                <table>
                                    <thead>
                                        <tr>
                                            <th>AP Score</th>
                                            <th>Equivalency</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr><td>5</td><td>100%</td></tr>
                                        <tr><td>4</td><td>93%</td></tr>
                                        <tr><td>3</td><td>86%</td></tr>
                                        <tr><td>2</td><td>50%</td></tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Arabic Edexcel Grades Equivalency -->
                            <div class="table-wrapper arabic-table">
                                <h3>Arabic Edexcel Grades Equivalency</h3>
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Arabic Grade</th>
                                            <th>Equivalency</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr><td>A*</td><td>100%</td></tr>
                                        <tr><td>A</td><td>95%</td></tr>
                                        <tr><td>B</td><td>85%</td></tr>
                                        <tr><td>C</td><td>75%</td></tr>
                                        <tr><td>D</td><td>65%</td></tr>
                                        <tr><td>E</td><td>55%</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="bottom-tables">
                            <!-- ACT 1 / ACT Subjects Equivalency -->
                            <div class="table-wrapper act-table">
                                <h3>ACT 1 / ACT Subjects Equivalency</h3>
                                <table>
                                    <thead>
                                        <tr>
                                            <th>ACT Score</th>
                                            <th>Equivalency</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr><td>36</td><td>100%</td></tr>
                                        <tr><td>35</td><td>99%</td></tr>
                                        <tr><td>34</td><td>98%</td></tr>
                                        <tr><td>33</td><td>97%</td></tr>
                                        <tr><td>32</td><td>96%</td></tr>
                                        <tr><td>31</td><td>95%</td></tr>
                                        <tr><td>30</td><td>94%</td></tr>
                                        <tr><td>29</td><td>93%</td></tr>
                                        <tr><td>28</td><td>92%</td></tr>
                                        <tr><td>27</td><td>91%</td></tr>
                                        <tr><td>26</td><td>90%</td></tr>
                                        <tr><td>25</td><td>88%</td></tr>
                                        <tr><td>24</td><td>86%</td></tr>
                                        <tr><td>23</td><td>84%</td></tr>
                                        <tr><td>22</td><td>82%</td></tr>
                                        <tr><td>21</td><td>79%</td></tr>
                                        <tr><td>20</td><td>76%</td></tr>
                                        <tr><td>19</td><td>73%</td></tr>
                                        <tr><td>18</td><td>70%</td></tr>
                                        <tr><td>17</td><td>67%</td></tr>
                                        <tr><td>16</td><td>64%</td></tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Digital SAT 1 (MOE Jordanian Equivalency) -->
                            <div class="table-wrapper dsat-table">
                                <h3>Digital SAT 1 (MOE Jordanian Equivalency)</h3>
                                <div class="two-column-table">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>SAT Score</th>
                                                <th>MOE Equivalency</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr><td>1600–1550</td><td>100</td></tr>
                                            <tr><td>1540–1530</td><td>99</td></tr>
                                            <tr><td>1520–1510</td><td>98</td></tr>
                                            <tr><td>1500–1490</td><td>97</td></tr>
                                            <tr><td>1480–1470</td><td>96</td></tr>
                                            <tr><td>1460–1450</td><td>95</td></tr>
                                            <tr><td>1440–1430</td><td>94</td></tr>
                                            <tr><td>1420–1410</td><td>93</td></tr>
                                            <tr><td>1400–1390</td><td>92</td></tr>
                                            <tr><td>1380–1370</td><td>91</td></tr>
                                            <tr><td>1360–1350</td><td>90</td></tr>
                                            <tr><td>1340–1330</td><td>89</td></tr>
                                            <tr><td>1320–1310</td><td>88</td></tr>
                                        </tbody>
                                    </table>
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>SAT Score</th>
                                                <th>MOE Equivalency</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr><td>1300–1290</td><td>87</td></tr>
                                            <tr><td>1280–1270</td><td>86</td></tr>
                                            <tr><td>1260–1250</td><td>85</td></tr>
                                            <tr><td>1240–1230</td><td>84</td></tr>
                                            <tr><td>1220–1210</td><td>83</td></tr>
                                            <tr><td>1200–1190</td><td>82</td></tr>
                                            <tr><td>1180–1170</td><td>81</td></tr>
                                            <tr><td>1160–1150</td><td>80</td></tr>
                                            <tr><td>1140–1130</td><td>79</td></tr>
                                            <tr><td>1120–1110</td><td>78</td></tr>
                                            <tr><td>1100–1090</td><td>77</td></tr>
                                            <tr><td>1080–1070</td><td>76</td></tr>
                                            <tr><td>1060–1050</td><td>75</td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            <div id="results-section" class="hidden">
                <h2>Results</h2>
                <button id="back-to-equations-button" class="btn"><i class="fas fa-chevron-left"></i> Back to Scores</button>
                <div id="results-display"></div>
                <div class="button-group">
                    <button id="recalculate-button" class="btn primary-btn">Recalculate</button>
                    <button id="main-menu-button" class="btn primary-btn">Main Menu</button>
                </div>
                
                <div id="conversion-tables" class="conversion-section">
                    <h2>Equivalency Conversion Tables</h2>
                    <p class="table-info">These tables show how raw scores convert to Jordanian percentages</p>
                    
                    <div class="tables-container">
                        <div class="top-tables">
                            <!-- EST/SAT SUBJECT Equivalency Table -->
                            <div class="table-wrapper sat-table">
                                <h3>EST/SAT SUBJECT Equivalency Table</h3>
                                <table>
                                    <thead>
                                        <tr>
                                            <th>EST/SAT Score Range</th>
                                            <th>Equivalency</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr><td>780–800</td><td>100%</td></tr>
                                        <tr><td>750–770</td><td>98%</td></tr>
                                        <tr><td>720–740</td><td>95%</td></tr>
                                        <tr><td>690–710</td><td>93%</td></tr>
                                        <tr><td>660–680</td><td>90%</td></tr>
                                        <tr><td>630–650</td><td>86%</td></tr>
                                        <tr><td>600–620</td><td>83%</td></tr>
                                        <tr><td>570–590</td><td>80%</td></tr>
                                        <tr><td>540–560</td><td>77%</td></tr>
                                        <tr><td>510–530</td><td>73%</td></tr>
                                        <tr><td>480–500</td><td>70%</td></tr>
                                        <tr><td>450–470</td><td>65%</td></tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- AP Subjects Equivalency -->
                            <div class="table-wrapper ap-table">
                                <h3>AP Subjects Equivalency</h3>
                                <table>
                                    <thead>
                                        <tr>
                                            <th>AP Score</th>
                                            <th>Equivalency</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr><td>5</td><td>100%</td></tr>
                                        <tr><td>4</td><td>93%</td></tr>
                                        <tr><td>3</td><td>86%</td></tr>
                                        <tr><td>2</td><td>50%</td></tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Arabic Edexcel Grades Equivalency -->
                            <div class="table-wrapper arabic-table">
                                <h3>Arabic Edexcel Grades Equivalency</h3>
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Arabic Grade</th>
                                            <th>Equivalency</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr><td>A*</td><td>100%</td></tr>
                                        <tr><td>A</td><td>95%</td></tr>
                                        <tr><td>B</td><td>85%</td></tr>
                                        <tr><td>C</td><td>75%</td></tr>
                                        <tr><td>D</td><td>65%</td></tr>
                                        <tr><td>E</td><td>55%</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="bottom-tables">
                            <!-- ACT 1 / ACT Subjects Equivalency -->
                            <div class="table-wrapper act-table">
                                <h3>ACT 1 / ACT Subjects Equivalency</h3>
                                <table>
                                    <thead>
                                        <tr>
                                            <th>ACT Score</th>
                                            <th>Equivalency</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr><td>36</td><td>100%</td></tr>
                                        <tr><td>35</td><td>99%</td></tr>
                                        <tr><td>34</td><td>98%</td></tr>
                                        <tr><td>33</td><td>97%</td></tr>
                                        <tr><td>32</td><td>96%</td></tr>
                                        <tr><td>31</td><td>95%</td></tr>
                                        <tr><td>30</td><td>94%</td></tr>
                                        <tr><td>29</td><td>93%</td></tr>
                                        <tr><td>28</td><td>92%</td></tr>
                                        <tr><td>27</td><td>91%</td></tr>
                                        <tr><td>26</td><td>90%</td></tr>
                                        <tr><td>25</td><td>88%</td></tr>
                                        <tr><td>24</td><td>86%</td></tr>
                                        <tr><td>23</td><td>84%</td></tr>
                                        <tr><td>22</td><td>82%</td></tr>
                                        <tr><td>21</td><td>79%</td></tr>
                                        <tr><td>20</td><td>76%</td></tr>
                                        <tr><td>19</td><td>73%</td></tr>
                                        <tr><td>18</td><td>70%</td></tr>
                                        <tr><td>17</td><td>67%</td></tr>
                                        <tr><td>16</td><td>64%</td></tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Digital SAT 1 (MOE Jordanian Equivalency) -->
                            <div class="table-wrapper dsat-table">
                                <h3>Digital SAT 1 (MOE Jordanian Equivalency)</h3>
                                <div class="two-column-table">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>SAT Score</th>
                                                <th>MOE Equivalency</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr><td>1600–1550</td><td>100</td></tr>
                                            <tr><td>1540–1530</td><td>99</td></tr>
                                            <tr><td>1520–1510</td><td>98</td></tr>
                                            <tr><td>1500–1490</td><td>97</td></tr>
                                            <tr><td>1480–1470</td><td>96</td></tr>
                                            <tr><td>1460–1450</td><td>95</td></tr>
                                            <tr><td>1440–1430</td><td>94</td></tr>
                                            <tr><td>1420–1410</td><td>93</td></tr>
                                            <tr><td>1400–1390</td><td>92</td></tr>
                                            <tr><td>1380–1370</td><td>91</td></tr>
                                            <tr><td>1360–1350</td><td>90</td></tr>
                                            <tr><td>1340–1330</td><td>89</td></tr>
                                            <tr><td>1320–1310</td><td>88</td></tr>
                                        </tbody>
                                    </table>
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>SAT Score</th>
                                                <th>MOE Equivalency</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr><td>1300–1290</td><td>87</td></tr>
                                            <tr><td>1280–1270</td><td>86</td></tr>
                                            <tr><td>1260–1250</td><td>85</td></tr>
                                            <tr><td>1240–1230</td><td>84</td></tr>
                                            <tr><td>1220–1210</td><td>83</td></tr>
                                            <tr><td>1200–1190</td><td>82</td></tr>
                                            <tr><td>1180–1170</td><td>81</td></tr>
                                            <tr><td>1160–1150</td><td>80</td></tr>
                                            <tr><td>1140–1130</td><td>79</td></tr>
                                            <tr><td>1120–1110</td><td>78</td></tr>
                                            <tr><td>1100–1090</td><td>77</td></tr>
                                            <tr><td>1080–1070</td><td>76</td></tr>
                                            <tr><td>1060–1050</td><td>75</td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <footer>
            <p>Dr. Mohammad Shatnawi. All rights reserved. © 2025.</p>
        </footer>
    </div>
    
    <script src="script.js"></script>
    
    <!-- Special script for Wix embedding and scrolling -->
    <script>
        // Detect if we're on a mobile device
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        console.log('Mobile device detected:', isMobile);
        
        // Listen for messages from parent window (Wix)
        window.addEventListener('message', function(event) {
            // Check if the message is from our parent
            if (event.data && event.data.type === 'wix-ready') {
                console.log('Received wix-ready message, initializing special handling');
                
                // Add special handling for Wix embedding
                initWixSpecialHandling();
            }
        });
        
        // Send a message to the parent window to let it know we're ready
        function notifyParentReady() {
            try {
                if (window.parent && window.parent !== window) {
                    window.parent.postMessage({ 
                        type: 'calculator-ready',
                        isMobile: isMobile
                    }, '*');
                }
            } catch (e) {
                console.log('Could not notify parent window');
            }
        }
        
        // Mobile-specific scrolling function
        function mobileScrollFix(targetElement) {
            if (!isMobile) return;
            
            // For mobile devices, we need more aggressive scrolling
            console.log('Applying mobile-specific scrolling fix');
            
            // Try multiple scrolling methods with increasing delays
            const delays = [100, 300, 600, 1000];
            
            delays.forEach(delay => {
                setTimeout(() => {
                    // Direct scrolling
                    window.scrollTo(0, 0);
                    document.body.scrollTop = 0;
                    document.documentElement.scrollTop = 0;
                    
                    // Element-based scrolling
                    if (targetElement) {
                        targetElement.scrollIntoView(true);
                    }
                    
                    // Parent frame scrolling
                    try {
                        if (window.parent && window.parent !== window) {
                            // Try multiple scroll positions for the parent
                            window.parent.scrollTo(0, 0);
                            window.parent.document.body.scrollTop = 0;
                            window.parent.document.documentElement.scrollTop = 0;
                            
                            // Try to find the iframe in the parent and scroll to it
                            const iframes = window.parent.document.querySelectorAll('iframe');
                            for (let i = 0; i < iframes.length; i++) {
                                if (iframes[i].contentWindow === window) {
                                    iframes[i].scrollIntoView(true);
                                    
                                    // Also scroll the parent of the iframe
                                    let parent = iframes[i].parentElement;
                                    while (parent) {
                                        parent.scrollTop = 0;
                                        parent = parent.parentElement;
                                    }
                                    break;
                                }
                            }
                            
                            // Try to scroll Wix-specific containers
                            const wixContainers = [
                                '.wix-iframe-container',
                                '#SITE_CONTAINER',
                                '#PAGES_CONTAINER',
                                '#site-root',
                                '#masterPage',
                                '.mobile-site-wrapper',
                                '.mobile-site-centered'
                            ];
                            
                            wixContainers.forEach(selector => {
                                try {
                                    const container = window.parent.document.querySelector(selector);
                                    if (container) {
                                        container.scrollTop = 0;
                                    }
                                } catch (e) {}
                            });
                            
                            // Send a message to the parent for mobile scrolling
                            window.parent.postMessage({
                                type: 'mobile-scroll-request',
                                timestamp: Date.now()
                            }, '*');
                        }
                    } catch (e) {
                        console.log('Error in mobile scroll fix:', e);
                    }
                }, delay);
            });
        }
        
        // Initialize special handling for Wix embedding
        function initWixSpecialHandling() {
            // Add additional click handlers to ensure scrolling works
            document.querySelectorAll('.btn').forEach(button => {
                button.addEventListener('click', function() {
                    // Add a slight delay to allow DOM updates
                    setTimeout(function() {
                        // Try to scroll to the active section
                        try {
                            // Find the visible section
                            let activeSection = null;
                            if (!document.getElementById('input-section').classList.contains('hidden')) {
                                activeSection = document.getElementById('input-section');
                            } else if (!document.getElementById('results-section').classList.contains('hidden')) {
                                activeSection = document.getElementById('results-section');
                            } else {
                                activeSection = document.getElementById('equation-selection');
                            }
                            
                            // Scroll to the active section
                            if (activeSection) {
                                activeSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                
                                // Apply mobile-specific fixes
                                mobileScrollFix(activeSection);
                            }
                            
                            // Also try to scroll the parent window
                            if (window.parent && window.parent !== window) {
                                window.parent.scrollTo(0, 0);
                            }
                        } catch (e) {
                            console.log('Error scrolling in Wix:', e);
                        }
                    }, 300);
                }, { passive: true });
            });
            
            // Special handling for the calculate button
            const calculateBtn = document.getElementById('calculate-button');
            if (calculateBtn) {
                calculateBtn.addEventListener('click', function() {
                    if (isMobile) {
                        console.log('Mobile calculate button clicked, applying special handling');
                        setTimeout(() => {
                            const resultsSection = document.getElementById('results-section');
                            if (resultsSection && !resultsSection.classList.contains('hidden')) {
                                mobileScrollFix(resultsSection);
                            }
                        }, 500);
                    }
                }, { passive: true });
            }
        }
        
        // Notify parent once the page is fully loaded
        window.addEventListener('load', function() {
            notifyParentReady();
            
            // Check if we're in an iframe (like Wix)
            if (window !== window.parent) {
                console.log('Detected iframe embedding, initializing special handling');
                initWixSpecialHandling();
                
                // Add a special meta tag for mobile viewports when embedded
                if (isMobile) {
                    const meta = document.createElement('meta');
                    meta.name = 'viewport';
                    meta.content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no';
                    document.head.appendChild(meta);
                    
                    // Add a special style for mobile embedded view
                    const style = document.createElement('style');
                    style.textContent = `
                        @media (max-width: 767px) {
                            body { overflow-x: hidden; }
                            .container { padding: 10px; }
                            #results-section { padding-top: 20px; }
                        }
                    `;
                    document.head.appendChild(style);
                }
            }
        });
    </script>
</body>
</html>
